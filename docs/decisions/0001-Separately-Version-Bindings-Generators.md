---
# Configuration for the Jekyll template "Just the Docs"
parent: Decisions
nav_order: 100
title: Separately Version Bindings Generators

# These are optional elements. Feel free to remove any of them.
status: proposed
date: 2022-06-24
deciders: Kyle Brown
consulted: Bailey Hayes
# informed:
---
<!-- we need to disable MD025, because we use the different heading "ADR Template" in the homepage (see above) than it is foreseen in the template -->
<!-- markdownlint-disable-next-line MD025 -->
# Separately Version Bindings Generators

## Context and Problem Statement

The `wit-bindgen` repository contains a collection of crates. These crates need to have a version ascribed to them collectively or separately.

## Decision Drivers

* Reflecting that individual bindings generators are developed separately and have their own API surfaces.
* Preventing a situation where `wit-bindgen` CLI behaves differently for different generators.

## Considered Options

* There is one version for the `wit-bindgen` CLI and individual generators do not have their own version
* The `wit-bindgen` CLI shares a `major` and `minor` version with all of the generators which indicates what its
* There is a version for the `wit-bindgen` CLI and for each individual generator
  * Sub-option A: For a given `wit-bindgen` CLI version, all bindings generators it contains must support the same WIT semantics.
  * Sub-option B: For a given `wit-bindgen` CLI version, individual bindings generators may support different WIT semantics.

## Decision Outcome

Each individual bindings generator will have its own version.

For a version of the `wit-bindgen` CLI, any `*.wit` file accepted by two bindings generators must have the same semantic interpretation. This requires that they support the same version of WIT, but that support is not required to be complete.

Users of the CLI should be able to determine the version of each of the bindings generators it contains.

### Positive Consequences

* Users are able to more reliably depend upon the characteristics of the bindings generated by each generator.
* Users are more able to tell what changes are occurring in each bindings generator.

### Negative Consequences

* The release process must manage all of the versions independently.
* The release process must manage multiple separate changelogs.

## Pros and Cons of the Options

### Shared `major.minor` Versioning
* Good because it is easy to tell which WIT/wit-bindgen version a bindings generator version supports
* Bad because when we make a breaking change to the binding generators outputted code but the WIT version supported does not change, we are unable to reflect the breaking change in the bindings generator version.

e.g. the Python union handling change which is breaking because `case.value` no longer works for simple unions, but does not represent a breaking change of WIT itself.

### A Single Version for Everything
Same issues as "Shared `major.minor` Versioning" but even more amplified because there is no way to indicate these changes except upgrading the major version for the entirety of `wit-bindgen`.
